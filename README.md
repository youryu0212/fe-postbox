# [데모페이지](https://hoi-geon-postbox.herokuapp.com/)

# STEP2 PR

![데모](https://user-images.githubusercontent.com/87521172/157813396-20e9fed1-b26a-4c06-bb73-cf18dde1e571.gif)

빨간 우체통을 가진 마을이 없는 경우 :
<img width="1181" alt="빨간우체통이 없는 경우" src="https://user-images.githubusercontent.com/87521172/157813436-efc44c71-a5c7-4f2f-a454-014c0e7dd7cd.png">

## 설계

### 미션1

- [x] 전체 레이아웃 구현
- [x] querySelector 만들기 → getElementByClassName만 구현
- [x] 위치, 크기, 우체통 정보를 가지고 있는 마을 객체 구현
- [x] 마을 객체 랜덤으로 여러개 생성
- [x] 마을의 크기 위치를 어떻게 만들까? → 유효성 검사를 통해 유효한 좌표 생성
- [x] 마을 객체 화면에 표시 → 내부 마을은 어떻게? → 재귀 호출

### 미션2

- [x] 버튼 클릭 이벤트리스너 작성
- [x] 빨간 우체통을 가진 마을 탐색 (Promise)
  - [x] 만든 dom-api를 통해 탐색
  - [x] 마을 정보 배열을 크기를 기준으로 정렬, 정렬 함수 직접 만들기 → merge sort
- [x] 탐색이 완료된 마을 객체를 2초 뒤에 색을 변경 탐색.then(), delay() 사용

### 미션3

- [x] 마을 데이터를 서버에서 생성해서 요청시 응답

## 구현 내용

마을의 위치를 `position: absolute;` 로 겹치지 않도록 랜덤 배치

### 랜덤 좌표 생성 함수 :

- 좌표 유효성 검사를 진행하며 좌표,크기를 반복해서 동적으로 생성
- 유효성 검사 방법 :
  - 부모 요소의 크기를 받아 해당 범위를 벗어나면 무효
  - 생성된 좌표와 크기의 범위에 방문처리 된 곳이 있으면 무효
  - 이미 생성된 마을 범위 배열 내에서 방문처리
- 위 방법으로 구한 유효한 [위치, 크기] 들의 배열을 반환

### 마을 클래스 구현

- 마을의 위치, 크기, 내부마을 정보를 가지고 있는 마을 클래스 구현
- `createTemplate()` 메소드를 통해 html 템플릿 생성
  - 내부 마을이 있을 시 해당 템플릿 또한 상위 마을의 템플릿에 포함되도록 재귀

### 마을 데이터 서버에서 생성

- 랜덤 좌표, 마을 생성 로직을 서버로 이동
- 클라이언트에서 data 요청 시 서버가 마을 템플릿 데이터 응답

## 아쉬운 점 :

- 설계과정에서 mvc패턴 등 로직의 역할 분리를 고려하지 못함
